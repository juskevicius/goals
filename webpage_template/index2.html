<!DOCTYPE html>
<html lang="en-US">
<head>
    <title>Norian Goals</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <button type="submit" onclick="login()">Get token</button>
  <button type="submit" onclick="getResponse()">Submit token</button>
</form>

<script>

let tokenVal;

function login() {
fetch("http://127.0.0.1:3000/api/users/login", {
    method: "post", 
    headers: {"Content-Type": "application/json"}, 
    body: JSON.stringify({
    "user": {
        "email": "mantas@test.eu",
        "password": "123456"
        }
    }) 
}).then(response => response.json())
  .then((body) => {
    console.log(body.user.token);
    tokenVal = body.user.token;
  });
}

function getResponse() {
fetch("http://127.0.0.1:3000/api/users/current", {
    method: "GET", 
    headers: {
        'Content-Type': 'application/json',
        "Authorization": "Token " + tokenVal},  
}).then(response => response.text())
  .then((body) => {
    console.log(body);
  });
}

</script>